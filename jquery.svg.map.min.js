(function(g){var w=function(p,n){var q=g(p),r=!1,s=!1,h={},a,f,l,t,u=!0,d=g.extend({zoomLevels:20,buttonsAdditionalClass:"",plusButtonText:"+",minusButtonText:"-",enableConsoleOutput:!1},n||{});this.disableDragging=function(){u=!1};this.enableDragging=function(){u=!0};var v=function(b,a){l.x=b.clientX;l.y=b.clientY;return null===a?l.matrixTransform(f.getScreenCTM().inverse()):l.matrixTransform(a.getScreenCTM().inverse())};a=g(q);f=a.get(0);l=f.createSVGPoint();(function(){f.onselectstart=function(){return!1};
f.unselectable="on";a.css("user-select","none");a.css("-o-user-select","none");a.css("-moz-user-select","none");a.css("-khtml-user-select","none");a.css("-webkit-user-select","none")})();(function(){a.wrap('<section id="svg_map_wrapper" style="position: relative; width: '+a.width()+"px; height: "+a.height()+'px;" />');t=g("#svg_map_wrapper");var b=g('<button class="zoom_button '+d.buttonsAdditionalClass+'" type="button" id="zoom_in" data-zoom="-1">'+d.plusButtonText+"</button>"),e=g('<button class="zoom_button '+
d.buttonsAdditionalClass+'" type="button" id="zoom_out" data-zoom="1">'+d.minusButtonText+"</button>"),c=g('<aside class="zoom_button_container" style="z-index: 999;" />');c.css({position:"absolute",top:0,right:0});c.append(b);c.append(e);t.prepend(c)})();t.find(".zoom_button").on("click",function(b){var e=g(b.target).data("zoom");!0===d.enableConsoleOutput&&(console.groupCollapsed("SVG Zoom"),console.log("zoomFactor",e));var c=a.width(),k=a.height();b=(f.getAttribute("viewBox")||"0 0 "+c+" "+k).split(" ");
var m=b[2],h=b[3];!0===d.enableConsoleOutput&&(console.log("currentWidth",m),console.log("currentHeight",h));c/=d.zoomLevels;k/=d.zoomLevels;!0===d.enableConsoleOutput&&(console.log("zoomStepWidth",c),console.log("zoomStepHeight",k));m/=c;h/=k;!0===d.enableConsoleOutput&&(console.log("currentStepWidth",m),console.log("currentStepHeight",h));c*=m+e;e=k*(h+e);!0===d.enableConsoleOutput&&(console.log("newWidth",c),console.log("newHeight",e));1>c&&(c=1);1>e&&(e=1);!0===d.enableConsoleOutput&&console.groupEnd();
b=[b[0],b[1],Math.floor(c),Math.floor(e)];f.setAttribute("viewBox",b.join(" "));a.trigger("svg_map.zoom",[b])});a.on("mousedown",function(b){var e=v(b,f);r=!0;s=!1;var c=(f.getAttribute("viewBox")||"0 0 0 0").split(" ");h={x:b.offsetX,y:b.offsetY,xOffset:-1*c[0],yOffset:-1*c[1]};a.trigger("svg_map.mousedown",[e,h])});a.on("mouseup",function(b){b=v(b,f);!1===s&&a.trigger("svg_map.click",[b]);r=!1;a.css("cursor","auto");a.trigger("svg_map.mouseup",[b])});a.on("mousemove",function(b){var e=v(b,f);a.trigger("svg_map.move",
[e]);s=!0;if(u&&r){var c=b.offsetX;b=b.offsetY;a.css("cursor","move");var d=a.width(),g=a.height(),d=(f.getAttribute("viewBox")||"0 0 "+d+" "+g).split(" ");f.setAttribute("viewBox",[h.x-h.xOffset-c,h.y-h.yOffset-b,d[2],d[3]].join(" "));a.trigger("svg_map.drag",[e])}});a.trigger("svg_map.init")};g.fn.svgMap=function(p){return this.filter("svg").each(function(){var n=g(this);if(!n.data("svgmap")){var q=new w(this,p);n.data("svgmap",q)}})}})(jQuery);
