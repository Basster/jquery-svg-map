(function(f){var w=function(p,n){var q=f(p),r=!1,s=!1,g={},a,e,l,t,u=!0,k=f.extend({zoomLevels:20,plusButtonText:"+",minusButtonText:"-",enableConsoleOutput:!1},n||{});this.disableDragging=function(){u=!1};this.enableDragging=function(){u=!0};var v=function(b,a){l.x=b.clientX;l.y=b.clientY;return null===a?l.matrixTransform(e.getScreenCTM().inverse()):l.matrixTransform(a.getScreenCTM().inverse())};a=f(q);e=a.get(0);l=e.createSVGPoint();(function(){e.onselectstart=function(){return!1};e.unselectable=
"on";a.css("user-select","none");a.css("-o-user-select","none");a.css("-moz-user-select","none");a.css("-khtml-user-select","none");a.css("-webkit-user-select","none")})();(function(){a.wrap('<section id="svg_map_wrapper" style="position: relative; width: '+a.width()+"px; height: "+a.height()+'px;" />');t=f("#svg_map_wrapper");var b=f('<button class="zoom_button" type="button" id="zoom_in" data-zoom="-1">'+k.plusButtonText+"</button>"),d=f('<button class="zoom_button" type="button" id="zoom_out" data-zoom="1">'+
k.minusButtonText+"</button>"),c=f('<aside class="zoom_button_container" style="z-index: 999;" />');c.css({position:"absolute",top:0,right:0});c.append(b);c.append(d);t.prepend(c)})();t.find(".zoom_button").on("click",function(b){var d=f(b.target).data("zoom");!0===k.enableConsoleOutput&&(console.groupCollapsed("SVG Zoom"),console.log("zoomFactor",d));var c=a.width(),h=a.height();b=(e.getAttribute("viewBox")||"0 0 "+c+" "+h).split(" ");var m=b[2],g=b[3];!0===k.enableConsoleOutput&&(console.log("currentWidth",
m),console.log("currentHeight",g));c/=k.zoomLevels;h/=k.zoomLevels;!0===k.enableConsoleOutput&&(console.log("zoomStepWidth",c),console.log("zoomStepHeight",h));m/=c;g/=h;!0===k.enableConsoleOutput&&(console.log("currentStepWidth",m),console.log("currentStepHeight",g));c*=m+d;d=h*(g+d);!0===k.enableConsoleOutput&&(console.log("newWidth",c),console.log("newHeight",d));1>c&&(c=1);1>d&&(d=1);!0===k.enableConsoleOutput&&console.groupEnd();b=[b[0],b[1],Math.floor(c),Math.floor(d)];e.setAttribute("viewBox",
b.join(" "));a.trigger("svg_map.zoom",[b])});a.on("mousedown",function(b){var d=v(b,e);r=!0;s=!1;var c=(e.getAttribute("viewBox")||"0 0 0 0").split(" ");g={x:b.offsetX,y:b.offsetY,xOffset:-1*c[0],yOffset:-1*c[1]};a.trigger("svg_map.mousedown",[d,g])});a.on("mouseup",function(b){b=v(b,e);!1===s&&a.trigger("svg_map.click",[b]);r=!1;a.css("cursor","auto");a.trigger("svg_map.mouseup",[b])});a.on("mousemove",function(b){var d=v(b,e);a.trigger("svg_map.move",[d]);s=!0;if(u&&r){var c=b.offsetX;b=b.offsetY;
a.css("cursor","move");var h=a.width(),f=a.height(),h=(e.getAttribute("viewBox")||"0 0 "+h+" "+f).split(" ");e.setAttribute("viewBox",[g.x-g.xOffset-c,g.y-g.yOffset-b,h[2],h[3]].join(" "));a.trigger("svg_map.drag",[d])}});a.trigger("svg_map.init")};f.fn.svgMap=function(p){return this.filter("svg").each(function(){var n=f(this);if(!n.data("svgmap")){var q=new w(this,p);n.data("svgmap",q)}})}})(jQuery);
